import{a as p}from"./chunk-AJCXHZIR.js";import{a as I}from"./chunk-6NT6GWZQ.js";import{c as _,e as B,f as T,j as F,l as N,m as O,n as V,o as $,p as w,r as M,t as U}from"./chunk-ACJALHG7.js";import{n as C,o as x,r as E}from"./chunk-RFLB7YYO.js";import{Ca as d,Da as c,Eb as y,S as h,Wa as u,X as S,Ya as a,ba as b,eb as i,fb as o,gb as g,mb as v,vb as n,xb as f}from"./chunk-6FEQCYFL.js";var j=(()=>{class t{http;constructor(e){this.http=e}postBudget(e){return this.http.post(`${p.apiUrl}/Budgets`,e)}getAllBudgets(){return this.http.get(`${p.apiUrl}/Budgets`)}deleteBudget(e){return this.http.delete(`${p.apiUrl}/Budgets?budgetId=${e}`)}updateBudget(e,r){return this.http.put(`${p.apiUrl}/Budgets?budgetId=${e}`,r)}processCalc(e){return this.http.post(`${p.apiUrl}/Budgets/calc`,e)}getAllServiceTypes(){return this.http.get(`${p.apiUrl}/ServiceType`)}static \u0275fac=function(r){return new(r||t)(S(I))};static \u0275prov=h({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function G(t,m){if(t&1&&(i(0,"option",16),n(1),o()),t&2){let e=m.$implicit;a("ngValue",e.id),d(),f(" ",e.name," ")}}function k(t,m){t&1&&(i(0,"option",16),n(1,"Selecione o detalhe do servi\xE7o"),o()),t&2&&a("ngValue","")}function R(t,m){if(t&1&&(i(0,"option",16),n(1),o()),t&2){let e=m.$implicit;a("ngValue",e.name),d(),f(" ",e.name," ")}}var J=(()=>{class t{fb;budgetService;form;serviceTypes=[];intentions=[];selectedServiceTypeId=null;selectedIntentionServiceId=null;ngOnInit(){this.getServiceTypes(),this.form.get("servico")?.valueChanges.subscribe(e=>{let r=this.serviceTypes.find(s=>s.id===e);this.intentions=r?.intentionServices||[];let l=this.form.get("detalheServico");this.intentions.length>0?(l?.enable(),l?.setValue(this.intentions[0].name)):(l?.setValue(""),l?.disable())})}constructor(e,r){this.fb=e,this.budgetService=r,this.form=this.fb.group({cep:[""],logradouro:[""],cidade:[""],area:[""],tipoImovel:[""],servico:[""],detalheServico:[{value:"",disabled:!0}]})}gerarOrcamento(){console.log("Form Data:",this.form.value)}getServiceTypes(){this.budgetService.getAllServiceTypes().subscribe(e=>{this.serviceTypes=e})}static \u0275fac=function(r){return new(r||t)(c(M),c(j))};static \u0275cmp=b({type:t,selectors:[["app-budget"]],standalone:!0,features:[y],decls:39,vars:6,consts:[[1,"bg-white","shadow-md","max-w-4xl","mx-auto","mt-10","rounded-xl","border","border-gray-200"],[1,"bg-green-500","text-white","text-center","text-2xl","font-bold","py-3","rounded-t-xl"],[1,"p-6","space-y-6",3,"ngSubmit","formGroup"],[1,"text-lg","font-semibold","mb-2"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],["formControlName","cep","placeholder","CEP",1,"input"],["formControlName","logradouro","placeholder","Logradouro",1,"input"],["formControlName","cidade","placeholder","Cidade",1,"input"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["formControlName","area","placeholder","\xC1rea do Im\xF3vel (m\xB2)",1,"input"],["formControlName","tipoImovel",1,"input"],["value","","disabled","","selected",""],["value","residencial"],["value","comercial"],["value","rural"],["id","servico","formControlName","servico",1,"form-control"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["id","detalheServico","formControlName","detalheServico",1,"form-control",3,"disabled"],[3,"ngValue",4,"ngIf"],[1,"text-center"],["type","submit",1,"bg-green-500","hover:bg-green-600","text-white","px-6","py-2","rounded-lg","font-semibold",3,"click"]],template:function(r,l){r&1&&(i(0,"div",0)(1,"h2",1),n(2,"Or\xE7amento"),o(),i(3,"form",2),v("ngSubmit",function(){return l.gerarOrcamento()}),i(4,"div")(5,"h3",3),n(6,"Localiza\xE7\xE3o"),o(),i(7,"div",4),g(8,"input",5)(9,"input",6)(10,"input",7),o()(),i(11,"div")(12,"h3",3),n(13,"Sobre o Im\xF3vel"),o(),i(14,"div",8),g(15,"input",9),i(16,"select",10)(17,"option",11),n(18,"Selecione o tipo de im\xF3vel"),o(),i(19,"option",12),n(20,"Residencial"),o(),i(21,"option",13),n(22,"Comercial"),o(),i(23,"option",14),n(24,"Rural"),o()()()(),i(25,"div")(26,"h3",3),n(27,"Qual servi\xE7o?"),o(),i(28,"div",8)(29,"select",15)(30,"option",16),n(31,"Selecione um servi\xE7o"),o(),u(32,G,2,2,"option",17),o(),i(33,"select",18),u(34,k,2,1,"option",19)(35,R,2,2,"option",17),o()()(),i(36,"div",20)(37,"button",21),v("click",function(){return l.getServiceTypes()}),n(38," Gerar Or\xE7amento "),o()()()()),r&2&&(d(3),a("formGroup",l.form),d(27),a("ngValue",""),d(2),a("ngForOf",l.serviceTypes),d(),a("disabled",!l.intentions.length),d(),a("ngIf",!l.intentions.length),d(),a("ngForOf",l.intentions))},dependencies:[U,F,$,w,_,V,B,T,N,O,E,C,x],styles:[".input[_ngcontent-%COMP%]{border:1px solid #ccc;padding:10px;border-radius:6px;width:100%}"]})}return t})();export{J as BudgetComponent};
