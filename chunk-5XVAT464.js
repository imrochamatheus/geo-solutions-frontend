import{a as $}from"./chunk-VS3KTBOR.js";import{b as x}from"./chunk-35HT5RMS.js";import"./chunk-7733DRMK.js";import{f as Z}from"./chunk-HJMF6YSB.js";import"./chunk-4YRY4IP2.js";import{b as te}from"./chunk-MH2CX7EV.js";import{c as X,e as R}from"./chunk-U4MZYTGD.js";import{c as M,d as u,e as k,f as I,j as N,m as D,n as j,r as A,u as q,w as y}from"./chunk-57VEO5ZA.js";import{a as ee}from"./chunk-AJCXHZIR.js";import{b as W}from"./chunk-KCOFYTGJ.js";import{l as C,o as Q,s as h}from"./chunk-JOQ4QRTS.js";import{A as _,Bb as a,Cb as v,D as F,Da as s,Ea as d,Jb as K,K as z,Kb as f,Nb as S,P as B,U as Y,Ya as J,_ as c,_a as l,f as U,gb as o,hb as n,i as E,ib as m,qb as b,sa as H,w as T}from"./chunk-URY3LSMO.js";import"./chunk-TMC7WMLO.js";var re=(e,g)=>({"bg-emerald-600 text-white font-medium":e,"bg-gray-800 text-white":g}),ie=(()=>{class e{activeTab="login";changeTab=new H;onTabClick(i){this.changeTab.emit(i)}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=c({type:e,selectors:[["app-auth-tabs"]],inputs:{activeTab:"activeTab"},outputs:{changeTab:"changeTab"},standalone:!0,features:[f],decls:5,vars:8,consts:[[1,"flex","rounded-t-lg","overflow-hidden","mb-6","text-white","text-sm","md:text-base"],[1,"flex-1","py-2.5","px-4","transition-colors","duration-300",3,"click","ngClass"]],template:function(t,r){t&1&&(o(0,"div",0)(1,"button",1),b("click",function(){return r.onTabClick("signup")}),a(2," Cadastre-se "),n(),o(3,"button",1),b("click",function(){return r.onTabClick("login")}),a(4," Login "),n()()),t&2&&(s(),l("ngClass",S(2,re,r.activeTab==="signup",r.activeTab!=="signup")),s(2),l("ngClass",S(5,re,r.activeTab==="login",r.activeTab!=="login")))},dependencies:[h,C],encapsulation:2})}return e})();var V=(e,g)=>{let i=g.get(e);if(i&&(i.touched||i?.dirty)){if(i?.hasError("required"))return"Campo obrigat\xF3rio";if(i?.hasError("email"))return"Email inv\xE1lido";if(i?.hasError("minlength"))return e==="password"?"A senha deve ter no m\xEDnimo 8 caracteres":e==="name"?"O nome deve ter no m\xEDnimo 2 caracteres":`M\xEDnimo de ${i?.errors?.minlength.requiredLength} caracteres`;if(i?.hasError("pattern"))return e==="cell"?"N\xFAmero de celular inv\xE1lido. Exemplo: (31) 98888-8888":"Formato inv\xE1lido"}return""};var pe=(e,g)=>({"bg-emerald-500 hover:bg-emerald-600":e,"bg-gray-400 cursor-not-allowed":g}),ne=(()=>{class e{fb;router;authService;toastService;form;loading=!1;getErrorMessage=V;constructor(i,t,r,p){this.fb=i,this.router=t,this.authService=r,this.toastService=p,this.form=this.fb.group({email:["",[u.required,u.email]],password:["",u.required]})}onSubmit(){let i=this.form.value;this.form.valid&&(this.loading=!0,this.authService.signin(i).pipe(_(1),F(()=>{this.loading=!1}),T(t=>{let r=t.error.message;return this.toastService.showError(r),E})).subscribe(t=>{t.jwtToken&&(this.toastService.showSuccess("Logado com sucesso!"),this.authService.isAdmin()?this.router.navigate(["/admin"]):this.router.navigate(["/about"]))}))}static \u0275fac=function(t){return new(t||e)(d(q),d(R),d(te),d($))};static \u0275cmp=c({type:e,selectors:[["app-signin-form"]],standalone:!0,features:[f],decls:18,vars:8,consts:[[1,"w-full",3,"ngSubmit","formGroup"],[1,"mb-4"],["for","email",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","email","type","email","formControlName","email","placeholder","seu@email.com","autocomplete","email","required","",1,"block","w-full","px-3","py-2","border","border-gray-300","rounded-md","text-sm","focus:outline-none","focus:ring-1","focus:ring-emerald-500","focus:border-emerald-500"],[1,"text-left","d-block","w-100","text-danger","pl-2","pt-1"],[1,"mb-6"],["for","password",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","password","type","password","autocomplete","new-password","formControlName","password","placeholder","******","required","",1,"block","w-full","px-3","py-2","border","border-gray-300","rounded-md","text-sm","focus:outline-none","focus:ring-1","focus:ring-emerald-500","focus:border-emerald-500"],["type","submit",1,"mx-auto","block","bg-emerald-500","hover:bg-emerald-600","text-white","font-medium","py-2","px-6","rounded-md","transition-colors","duration-300",3,"disabled","ngClass"],[1,"mt-4","text-center"],["href","#",1,"text-blue-500","hover:text-blue-700","text-sm","transition-colors","duration-300"]],template:function(t,r){t&1&&(o(0,"form",0),b("ngSubmit",function(){return r.onSubmit()}),o(1,"div",1)(2,"label",2),a(3,"Email"),n(),m(4,"input",3),o(5,"small",4),a(6),n()(),o(7,"div",5)(8,"label",6),a(9,"Senha"),n(),m(10,"input",7),o(11,"small",4),a(12),n()(),o(13,"button",8),a(14," Entrar "),n(),o(15,"div",9)(16,"a",10),a(17," Esqueci minha senha "),n()()()),t&2&&(l("formGroup",r.form),s(6),v(r.getErrorMessage("email",r.form)),s(6),v(r.getErrorMessage("password",r.form)),s(),l("disabled",!r.form.valid)("ngClass",S(5,pe,r.form.valid&&!r.loading,r.loading||!r.form.valid)))},dependencies:[y,N,M,k,I,A,D,j,h,C,x],encapsulation:2})}return e})();var O=function(e){return e[e.ADMIN=1]="ADMIN",e[e.USER=2]="USER",e}(O||{});var ae=(()=>{class e{http;constructor(i){this.http=i}register(i){return this.http.post(`${ee.apiUrl}/Users`,i)}static \u0275fac=function(t){return new(t||e)(Y(W))};static \u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var fe=(e,g)=>({"bg-emerald-500 hover:bg-emerald-600":e,"bg-gray-400 cursor-not-allowed":g}),se=(()=>{class e{fb;toastService;registerService;router;form;loading=!1;getErrorMessage=V;onDestroy$=new U;constructor(i,t,r,p){this.fb=i,this.toastService=t,this.registerService=r,this.router=p,this.form=this.fb.group({name:["",[u.required,u.minLength(2)]],email:["",[u.required,u.email]],cell:["",[u.required,u.pattern(/^\(?\d{2}\)?\s?9\d{4}-?\d{4}$/)]],password:["",[u.required,u.minLength(8)]]}),this.listenToCellFieldChanges()}listenToCellFieldChanges(){let i=this.form.get("cell");i?.valueChanges.pipe(z(this.onDestroy$)).subscribe(t=>{t&&i?.setValue(this.formatPhone(t),{emitEvent:!1})})}formatPhone(i){let t=i.replace(/\D/g,"").substring(0,11);return t.length<=2?`(${t}`:t.length<=6?`(${t.substring(0,2)}) ${t.substring(2)}`:t.length<=10?`(${t.substring(0,2)}) ${t.substring(2,6)}-${t.substring(6)}`:`(${t.substring(0,2)}) ${t.substring(2,7)}-${t.substring(7)}`}onSubmit(){if(this.form.invalid){console.log("Formul\xE1rio inv\xE1lido"),this.form.markAllAsTouched(),this.toastService.showError("Por favor, corrija os erros no formul\xE1rio.");return}let{name:i,email:t,cell:r,password:p}=this.form.value,G={name:i,cell:r,email:t,password:p,userType:O.USER};this.loading=!0,this.registerService.register(G).pipe(_(1),F(()=>{this.loading=!1}),T(P=>{console.error("Erro na requisi\xE7\xE3o:",P);let le=P?.error?.message||"Erro ao registrar.";return this.toastService.showError(le),E})).subscribe(P=>{this.toastService.showSuccess("Cadastro realizado com sucesso!"),this.form.reset(),this.router.navigate(["/auth/signin"])})}ngOnDestroy(){this.onDestroy$.next(),this.onDestroy$.complete()}static \u0275fac=function(t){return new(t||e)(d(q),d($),d(ae),d(R))};static \u0275cmp=c({type:e,selectors:[["app-signup-form"]],standalone:!0,features:[f],decls:27,vars:10,consts:[[1,"w-full",3,"ngSubmit","formGroup"],[1,"mb-4"],["for","name",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","name","type","text","formControlName","name","autocomplete","name","placeholder","Seu nome","required","",1,"block","w-full","px-3","py-2","border","border-gray-300","rounded-md","text-sm","focus:outline-none","focus:ring-1","focus:ring-emerald-500","focus:border-emerald-500"],[1,"text-left","d-block","w-100","text-danger","pl-2","pt-1"],["for","email",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","email","type","email","autocomplete","email","formControlName","email","placeholder","seu@email.com","required","",1,"block","w-full","px-3","py-2","border","border-gray-300","rounded-md","text-sm","focus:outline-none","focus:ring-1","focus:ring-emerald-500","focus:border-emerald-500"],["for","cell",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","cell","type","tel","autocomplete","tel","formControlName","cell","placeholder","(31) 99999-9999","required","",1,"block","w-full","px-3","py-2","border","border-gray-300","rounded-md","text-sm","focus:outline-none","focus:ring-1","focus:ring-emerald-500","focus:border-emerald-500"],["for","password",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","password","type","password","autocomplete","new-password","formControlName","password","placeholder","********","required","",1,"block","w-full","px-3","py-2","border","border-gray-300","rounded-md","text-sm","focus:outline-none","focus:ring-1","focus:ring-emerald-500","focus:border-emerald-500"],["type","submit",1,"mx-auto","block","bg-emerald-500","hover:bg-emerald-600","text-white","font-medium","py-2","px-6","rounded-md","transition-colors","duration-300",3,"disabled","ngClass"]],template:function(t,r){t&1&&(o(0,"form",0),b("ngSubmit",function(){return r.onSubmit()}),o(1,"div",1)(2,"label",2),a(3," Nome "),n(),m(4,"input",3),o(5,"small",4),a(6),n()(),o(7,"div",1)(8,"label",5),a(9," Email "),n(),m(10,"input",6),o(11,"small",4),a(12),n()(),o(13,"div",1)(14,"label",7),a(15," Celular "),n(),m(16,"input",8),o(17,"small",4),a(18),n()(),o(19,"div",1)(20,"label",9),a(21," Senha "),n(),m(22,"input",10),o(23,"small",4),a(24),n()(),o(25,"button",11),a(26," Cadastrar "),n()()),t&2&&(l("formGroup",r.form),s(6),v(r.getErrorMessage("name",r.form)),s(6),v(r.getErrorMessage("email",r.form)),s(6),v(r.getErrorMessage("cell",r.form)),s(6),v(r.getErrorMessage("password",r.form)),s(),l("disabled",!r.form.valid||r.loading)("ngClass",S(7,fe,r.form.valid&&!r.loading,r.loading||!r.form.valid)))},dependencies:[y,N,M,k,I,A,D,j,h,C],encapsulation:2})}return e})();var me=(()=>{class e{static \u0275fac=function(t){return new(t||e)};static \u0275cmp=c({type:e,selectors:[["app-illustration"]],standalone:!0,features:[f],decls:4,vars:0,consts:[[1,"flex","flex-col","items-center","justify-center","h-full"],["src","assets/images/login_img.png","alt","Imagem de login",1,"w-64","h-64","md:w-80","md:h-80","object-contain"],[1,"mt-6","text-lg","md:text-2xl","font-medium","text-gray-800","text-center"]],template:function(t,r){t&1&&(o(0,"div",0),m(1,"img",1),o(2,"h2",2),a(3," Bem-vindo \xE0 nossa plataforma "),n()())},encapsulation:2})}return e})();function ge(e,g){e&1&&m(0,"app-signin-form")}function be(e,g){e&1&&m(0,"app-signup-form")}var Ke=(()=>{class e{activatedRoute;activeTab="login";constructor(i){this.activatedRoute=i}setActiveTab(i){this.activeTab=i}listenToRouteChanges(){this.activatedRoute.url.subscribe(i=>{i[0].path==="signup"?this.setActiveTab("signup"):this.setActiveTab("login")})}ngOnInit(){this.listenToRouteChanges()}static \u0275fac=function(t){return new(t||e)(d(X))};static \u0275cmp=c({type:e,selectors:[["app-signin"]],standalone:!0,features:[K([Z,x]),f],decls:9,vars:3,consts:[[1,"flex","items-center","justify-center"],[1,"w-full","max-w-5xl","bg-white","rounded-lg","shadow-lg","overflow-hidden","flex","flex-col","md:flex-row"],[1,"w-full","md:w-1/2","bg-gray-50","p-8","flex","items-center","justify-center"],[1,"w-full","md:w-1/2","p-8"],[3,"changeTab","activeTab"],[1,"mt-2"],[4,"ngIf"]],template:function(t,r){t&1&&(o(0,"div",0)(1,"div",1)(2,"div",2),m(3,"app-illustration"),n(),o(4,"div",3)(5,"app-auth-tabs",4),b("changeTab",function(G){return r.setActiveTab(G)}),n(),o(6,"div",5),J(7,ge,1,0,"app-signin-form",6)(8,be,1,0,"app-signup-form",6),n()()()()),t&2&&(s(5),l("activeTab",r.activeTab),s(2),l("ngIf",r.activeTab==="login"),s(),l("ngIf",r.activeTab==="signup"))},dependencies:[x,h,Q,ie,y,ne,se,me],encapsulation:2})}return e})();export{Ke as SigninComponent};
