import{a as Ie,b as Ee}from"./chunk-2TFXXAVF.js";import{a as be}from"./chunk-VS3KTBOR.js";import{a as ve,b as ye}from"./chunk-35HT5RMS.js";import"./chunk-7733DRMK.js";import{f as fe}from"./chunk-HJMF6YSB.js";import"./chunk-4YRY4IP2.js";import{A as we,B as Te,D as F,E as R,c as Ce,i as Se,k as Me,m as Ae,o as xe,q as N,v as Fe,w as Re}from"./chunk-LWWUDTLH.js";import{a as ge,b as d}from"./chunk-MH2CX7EV.js";import{a as me,b as ue,d as x,e as v,f as de,h as ce,i as he,j as y}from"./chunk-U4MZYTGD.js";import{v as pe}from"./chunk-57VEO5ZA.js";import"./chunk-AJCXHZIR.js";import{a as ae,c as se,d as le}from"./chunk-KCOFYTGJ.js";import{d as ne,j as re,l as M,s as A}from"./chunk-JOQ4QRTS.js";import{$a as X,Bb as E,Cb as j,Da as u,Db as te,Ea as g,Fa as V,Ha as W,Ia as q,Ka as $,Kb as h,La as Z,M as z,Nb as k,Ob as oe,P as _,Qa as L,V as l,Z as T,_ as c,_a as p,_b as ie,ca as H,da as J,db as Y,eb as K,fb as Q,gb as r,hb as m,ib as s,l as w,qa as O,qb as I,rb as ee,w as B,xa as G}from"./chunk-URY3LSMO.js";import"./chunk-TMC7WMLO.js";function Xe(e){let i=e,t=Math.floor(Math.abs(e)),o=e.toString().replace(/^[^.]*\.?/,"").length;return t===1&&o===0?1:5}var De=["en",[["a","p"],["AM","PM"],void 0],[["AM","PM"],void 0,void 0],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],void 0,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],void 0,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",void 0,"{1} 'at' {0}",void 0],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",Xe];var Ye="@",Ke=(()=>{class e{constructor(t,o,n,a,C){this.doc=t,this.delegate=o,this.zone=n,this.animationType=a,this.moduleImpl=C,this._rendererFactoryPromise=null,this.scheduler=l(W,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??import("./chunk-2PJZANCI.js")).catch(o=>{throw new z(5300,!1)}).then(({\u0275createEngine:o,\u0275AnimationRendererFactory:n})=>{this._engine=o(this.animationType,this.doc,this.scheduler);let a=new n(this.delegate,this._engine,this.zone);return this.delegate=a,a})}createRenderer(t,o){let n=this.delegate.createRenderer(t,o);if(n.\u0275type===0)return n;typeof n.throwOnSyntheticProps=="boolean"&&(n.throwOnSyntheticProps=!1);let a=new U(n);return o?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(C=>{let D=C.createRenderer(t,o);a.use(D)}).catch(C=>{a.use(n)}),a}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}static{this.\u0275fac=function(o){V()}}static{this.\u0275prov=_({token:e,factory:e.\u0275fac})}}return e})(),U=class{constructor(i){this.delegate=i,this.replay=[],this.\u0275type=1}use(i){if(this.delegate=i,this.replay!==null){for(let t of this.replay)t(i);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(i,t){return this.delegate.createElement(i,t)}createComment(i){return this.delegate.createComment(i)}createText(i){return this.delegate.createText(i)}get destroyNode(){return this.delegate.destroyNode}appendChild(i,t){this.delegate.appendChild(i,t)}insertBefore(i,t,o,n){this.delegate.insertBefore(i,t,o,n)}removeChild(i,t,o){this.delegate.removeChild(i,t,o)}selectRootElement(i,t){return this.delegate.selectRootElement(i,t)}parentNode(i){return this.delegate.parentNode(i)}nextSibling(i){return this.delegate.nextSibling(i)}setAttribute(i,t,o,n){this.delegate.setAttribute(i,t,o,n)}removeAttribute(i,t,o){this.delegate.removeAttribute(i,t,o)}addClass(i,t){this.delegate.addClass(i,t)}removeClass(i,t){this.delegate.removeClass(i,t)}setStyle(i,t,o,n){this.delegate.setStyle(i,t,o,n)}removeStyle(i,t,o){this.delegate.removeStyle(i,t,o)}setProperty(i,t,o){this.shouldReplay(t)&&this.replay.push(n=>n.setProperty(i,t,o)),this.delegate.setProperty(i,t,o)}setValue(i,t){this.delegate.setValue(i,t)}listen(i,t,o){return this.shouldReplay(t)&&this.replay.push(n=>n.listen(i,t,o)),this.delegate.listen(i,t,o)}shouldReplay(i){return this.replay!==null&&i.startsWith(Ye)}};function _e(e="animations"){return $("NgAsyncAnimations"),H([{provide:q,useFactory:(i,t,o)=>new Ke(i,t,o,e),deps:[ne,me,Z]},{provide:G,useValue:e==="noop"?"NoopAnimations":"BrowserAnimations"}])}var ke=(e,i)=>{let t=l(d),o=l(v),n=i.url.startsWith("/auth"),a=t.isAuthenticated();return!a&&n?!0:a&&n?(o.navigate(["/about"]),!1):a?!0:(o.navigate(["/auth"]),!1)};var Ne=()=>{let e=l(d),i=l(v);return e.isAuthenticated()?e.isAdmin()?!0:(i.navigate(["/about"]),!1):(i.navigate(["/auth"]),!1)};var Pe=[{path:"",title:"Authentication",children:[{path:"",pathMatch:"full",redirectTo:"signin"},{path:"signin",title:"Login",loadComponent:()=>import("./chunk-5XVAT464.js").then(e=>e.SigninComponent)},{path:"signup",title:"Registration",loadComponent:()=>import("./chunk-5XVAT464.js").then(e=>e.SigninComponent)}]}];var Oe=[{path:"",pathMatch:"full",redirectTo:"dashboard"},{path:"dashboard",title:"Dashboard",loadComponent:()=>import("./chunk-6ODB2JCM.js").then(e=>e.DashboardComponent)},{path:"variables",title:"Vari\xE1veis",loadComponent:()=>import("./chunk-WP2FDV4F.js").then(e=>e.VariablesComponent)},{path:"regions",title:"Regi\xF5es",loadComponent:()=>import("./chunk-RMRS2CMF.js").then(e=>e.RegionsComponent)},{path:"configurations",title:"Configura\xE7\xF5es",loadComponent:()=>import("./chunk-MHXQNCER.js").then(e=>e.ConfigurationsComponent)},{path:"service-manager",title:"Gerenciador de Servi\xE7os",loadComponent:()=>import("./chunk-JDRODINR.js").then(e=>e.ServiceManagerComponent)}];var Le=()=>{let e=l(d),i=l(v);if(!e.isAuthenticated())return!0;let t=e.getToken();if(t)try{return ge(t).role.toLowerCase()==="admin"?i.navigate(["/admin"]):i.navigate(["/about"]),!1}catch{return e.logout(),i.navigate(["/auth"]),!1}return i.navigate(["/auth"]),!1};var b=(()=>{class e{isSidebarOpen=!0;toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen}static \u0275fac=function(o){return new(o||e)};static \u0275prov=_({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var Qe=(e,i,t)=>({"bg-emerald-600 text-white":e,"text-gray-300 hover:bg-emerald-500/10":i,"lg:justify-center lg:px-2":t}),Be=(()=>{class e{layout;path=O();icon=L.required();label=L.required();isActive=O(!1);constructor(t){this.layout=t}static \u0275fac=function(o){return new(o||e)(g(b))};static \u0275cmp=c({type:e,selectors:[["app-nav-item"]],inputs:{path:[T.SignalBased,"path"],icon:[T.SignalBased,"icon"],label:[T.SignalBased,"label"],isActive:[T.SignalBased,"isActive"]},outputs:{icon:"iconChange",label:"labelChange"},standalone:!0,features:[h],decls:4,vars:9,consts:[[1,"w-full","flex","items-center","gap-3","px-4","py-3","rounded-lg","transition-all",3,"ngClass"],[1,"w-6","h-6","flex-shrink-0",3,"name"],[1,"font-medium","whitespace-nowrap"]],template:function(o,n){o&1&&(r(0,"button",0),s(1,"lucide-icon",1),r(2,"span",2),E(3),m()()),o&2&&(p("ngClass",oe(5,Qe,n.isActive(),!n.isActive(),!n.layout.isSidebarOpen)),u(),p("name",n.icon()),u(),X("hidden",!n.layout.isSidebarOpen),u(),te(" ",n.label()," "))},dependencies:[A,M,R,F,y],encapsulation:2})}return e})();var et=(e,i)=>({"w-72 translate-x-0":e,"w-20 -translate-x-full lg:translate-x-0":i});function tt(e,i){if(e&1&&s(0,"app-nav-item",8),e&2){let t=i.$implicit,o=ee();p("icon",t.icon)("routerLink",t.path)("label",t.text)("isActive",o.isActive(t.path))}}var He=(()=>{class e{layout;router;authService;activeItem="dashboard";icons={home:Me,menu:N,users:Te,logout:Ae,fileText:Se,settings:Re,mapPinned:xe,building2:Ce};menuItems=[{icon:this.icons.home,text:"Dashboard",path:"/admin/dashboard"},{icon:this.icons.users,text:"Usu\xE1rios",path:"/admin/users"},{icon:this.icons.building2,text:"Vari\xE1veis",path:"/admin/variables"},{icon:this.icons.mapPinned,text:"Regi\xF5es",path:"/admin/regions"},{icon:this.icons.fileText,text:"Relat\xF3rios",path:"/reports"},{icon:this.icons.settings,text:"Servi\xE7os",path:"/admin/service-manager"},{icon:this.icons.settings,text:"Configura\xE7\xF5es",path:"/admin/configurations"}];constructor(t,o,n){this.layout=t,this.router=o,this.authService=n}isActive(t){return this.router.isActive(t,{paths:"subset",fragment:"ignored",queryParams:"exact",matrixParams:"ignored"})}logout(){this.authService.logout()}static \u0275fac=function(o){return new(o||e)(g(b),g(v),g(d))};static \u0275cmp=c({type:e,selectors:[["app-sidebar"]],standalone:!0,features:[h],decls:12,vars:6,consts:[[1,"fixed","top-0","left-0","h-full","bg-gray-900","text-white","shadow-lg","transition-all","duration-300","transform","lg:transform-none",2,"z-index","1000",3,"ngClass"],[1,"sticky","top-0","bg-black","z-10"],[1,"h-16","px-4","flex","items-center","justify-between"],[1,"flex","items-center"],["src","assets/images/logo_img.png",1,"w-[160px]"],[1,"p-2","hover:bg-emerald-500/20","rounded-lg","ml-auto",3,"click"],[1,"w-6","h-6","text-emerald-400",3,"img"],[1,"mt-2","px-2","space-y-1"],[1,"hover:bg-emerald-500/10","rounded-md","transition-colors","duration-200",3,"icon","routerLink","label","isActive"],[1,"absolute","bottom-4","w-full","px-2"],["label","Sair",1,"hover:bg-red-500/10","rounded-md",3,"click","icon"]],template:function(o,n){o&1&&(r(0,"aside",0)(1,"div",1)(2,"div",2)(3,"div",3),s(4,"img",4),m(),r(5,"button",5),I("click",function(){return n.layout.toggleSidebar()}),s(6,"lucide-angular",6),m()()(),r(7,"nav",7),K(8,tt,1,4,"app-nav-item",8,Y),m(),r(10,"div",9)(11,"app-nav-item",10),I("click",function(){return n.logout()}),m()()()),o&2&&(p("ngClass",k(3,et,n.layout.isSidebarOpen,!n.layout.isSidebarOpen)),u(6),p("img",n.icons.menu),u(2),Q(n.menuItems),u(3),p("icon",n.icons.logout))},dependencies:[Be,R,F,A,M,y,de],encapsulation:2})}return e})();var Je=(()=>{class e{layout;icons={menu:N,user:we,search:Fe};userName=null;userRole=l(d).getUserRole();authService=l(d);constructor(t){this.layout=t}ngOnInit(){this.authService.usernameSubject.subscribe(t=>{this.userName=t})}static \u0275fac=function(o){return new(o||e)(g(b))};static \u0275cmp=c({type:e,selectors:[["app-main-header"]],standalone:!0,features:[h],decls:13,vars:4,consts:[[1,"fixed","top-0","right-0","left-0","h-16","bg-white","shadow-sm","px-4",2,"z-index","999"],[1,"h-full","flex","items-center","justify-between","gap-4"],[1,"flex","items-center","gap-3"],[1,"lg:hidden","p-2","hover:bg-gray-100","rounded-lg",3,"click"],[1,"w-6","h-6","text-[#4D9F87]",3,"img"],[1,"text-right","hidden","sm:block"],[1,"font-medium","text-[#1E1E1E]"],[1,"text-sm","text-[#6B7280]"],[1,"w-10","h-10","bg-[#4D9F87]","rounded-full","flex","items-center","justify-center","flex-shrink-0"],[1,"w-6","h-6","text-white",3,"img"]],template:function(o,n){o&1&&(r(0,"header",0)(1,"div",1)(2,"div",2)(3,"button",3),I("click",function(){return n.layout.toggleSidebar()}),s(4,"lucide-angular",4),m()(),r(5,"div",2)(6,"div",5)(7,"div",6),E(8),m(),r(9,"div",7),E(10),m()(),r(11,"div",8),s(12,"lucide-angular",9),m()()()()),o&2&&(u(4),p("img",n.icons.menu),u(4),j(n.userName),u(2),j(n.userRole),u(2),p("img",n.icons.user))},dependencies:[R,F],encapsulation:2})}return e})();var ot=(e,i)=>({"lg:pl-80":e,"lg:pl-28":i}),Ge=(()=>{class e{layout;constructor(t){this.layout=t}static \u0275fac=function(o){return new(o||e)(g(b))};static \u0275cmp=c({type:e,selectors:[["app-main-layout"]],standalone:!0,features:[h],decls:5,vars:4,consts:[[1,"relative"],[1,"pt-16","transition-all","duration-300","min-h-screen","bg-gray-50",3,"ngClass"]],template:function(o,n){o&1&&(r(0,"div",0),s(1,"app-main-header")(2,"app-sidebar"),r(3,"main",1),s(4,"router-outlet"),m()()),o&2&&(u(3),p("ngClass",k(1,ot,n.layout.isSidebarOpen,!n.layout.isSidebarOpen)))},dependencies:[y,x,A,M,He,Je],encapsulation:2})}return e})();var Ve=(()=>{class e{static \u0275fac=function(o){return new(o||e)};static \u0275cmp=c({type:e,selectors:[["app-user-layout"]],standalone:!0,features:[h],decls:5,vars:0,consts:[[1,"min-h-screen","flex","flex-col"],[1,"flex-1","p-4","flex","flex-col","justify-center"]],template:function(o,n){o&1&&(r(0,"div",0),s(1,"app-user-header"),r(2,"main",1),s(3,"router-outlet"),m(),s(4,"app-footer"),m())},dependencies:[Ie,y,x,Ee],encapsulation:2})}return e})();var We=[{path:"admin",component:Ge,canActivate:[ke,Ne],children:Oe},{path:"",pathMatch:"prefix",component:Ve,children:[{path:"",pathMatch:"full",redirectTo:"auth"},{path:"auth",title:"Autentica\xE7\xE3o",canActivate:[Le],children:Pe},{path:"about",title:"Sobre",loadComponent:()=>import("./chunk-QPNCFMNN.js").then(e=>e.AboutComponent)},{path:"services",title:"Servi\xE7os",loadComponent:()=>import("./chunk-NXF76WTX.js").then(e=>e.ServicesComponent)},{path:"budget",loadComponent:()=>import("./chunk-RID3RUGN.js").then(e=>e.BudgetComponent)},{path:"budget/:id",loadComponent:()=>import("./chunk-RID3RUGN.js").then(e=>e.BudgetComponent)},{path:"configurations",loadComponent:()=>import("./chunk-MHXQNCER.js").then(e=>e.ConfigurationsComponent)}]},{path:"not-found",loadComponent:()=>import("./chunk-7DCXA6GY.js").then(e=>e.NotFoundComponent)},{path:"**",redirectTo:"/not-found"}];var qe=(e,i)=>{let t=l(d),o=l(v),a=[{url:"/Users",method:"POST"},{url:"/Users/login",method:"POST"},{url:"/budget"},{url:"/Budgets"},{url:"/ServiceType"},{url:"/calc"},{url:"https://viacep.com.br/ws"},{url:"city/coverage"},{url:"address"}].some(f=>e.url.includes(f.url)&&(f.method?e.method===f.method:!0));if(a)return e.url.includes("viacep.com.br"),i(e);if(a)return i(e);let C=t.getToken(),D=e;if(C&&t.isAuthenticated())D=e.clone({setHeaders:{Authorization:`Bearer ${C}`}});else return console.debug("Token is missing or expired"),t.logout(),o.navigate(["/auth/signin"],{queryParams:{returnUrl:o.routerState.snapshot.url}}),w(()=>new Error("Token is missing or expired"));return i(D).pipe(B(f=>{if(f instanceof ae){if(f.status===401)return console.debug("Unauthorized request",f),t.logout(),o.navigate(["/auth/signin"],{queryParams:{returnUrl:o.routerState.snapshot.url}}),w(()=>new Error("Unauthorized request"));if(f.status===403)return console.debug("Forbidden request",f),o.navigate(["/"]),w(()=>new Error("Forbidden request"))}return w(()=>f)}))};re(De);var $e={providers:[fe,be,ce(We,he({onSameUrlNavigation:"reload"})),se(le([qe])),_e(),J(pe),ie({eventCoalescing:!0})]};var Ze=(()=>{class e{static \u0275fac=function(o){return new(o||e)};static \u0275cmp=c({type:e,selectors:[["app-root"]],standalone:!0,features:[h],decls:2,vars:0,template:function(o,n){o&1&&s(0,"router-outlet")(1,"p-toast")},dependencies:[x,ye,ve],encapsulation:2})}return e})();ue(Ze,$e).catch(e=>console.error(e));
