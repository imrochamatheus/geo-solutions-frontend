import{d as b}from"./chunk-2RQ2OMPP.js";import{j as S,m as j,p as E,q as I}from"./chunk-Z4SU7DYJ.js";import{a as k}from"./chunk-AJCXHZIR.js";import{a as v}from"./chunk-6NT6GWZQ.js";import{r as y}from"./chunk-RFLB7YYO.js";import{Ca as p,Eb as w,O as h,S as g,X as d,Ya as u,ba as x,eb as n,fb as i,gb as m,k as f,vb as c}from"./chunk-6FEQCYFL.js";var a=class extends Error{};a.prototype.name="InvalidTokenError";function B(t){return decodeURIComponent(atob(t).replace(/(.)/g,(o,e)=>{let r=e.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}function U(t){let o=t.replace(/-/g,"+").replace(/_/g,"/");switch(o.length%4){case 0:break;case 2:o+="==";break;case 3:o+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return B(o)}catch{return atob(o)}}function T(t,o){if(typeof t!="string")throw new a("Invalid token specified: must be a string");o||(o={});let e=o.header===!0?0:1,r=t.split(".")[e];if(typeof r!="string")throw new a(`Invalid token specified: missing part #${e+1}`);let s;try{s=U(r)}catch(l){throw new a(`Invalid token specified: invalid base64 for part #${e+1} (${l.message})`)}try{return JSON.parse(s)}catch(l){throw new a(`Invalid token specified: invalid json for part #${e+1} (${l.message})`)}}function C(t){try{let o=T(t),e=Math.floor(Date.now()/1e3);return o.exp<e}catch(o){return console.error("Erro ao decodificar token:",o),!0}}var z=(()=>{class t{http;router;apiUrl=k.apiUrl;tokenKey="auth_token";userSubject=new f(this.getToken());constructor(e,r){this.http=e,this.router=r}getToken(){return localStorage.getItem(this.tokenKey)}setToken(e){localStorage.setItem(this.tokenKey,e),this.userSubject.next(e)}signin(e){return this.http.post(`${this.apiUrl}/Users/login`,e).pipe(h(r=>{r&&r.jwtToken&&this.setToken(r.jwtToken)}))}autoLogin(){let e=this.getToken();e&&this.userSubject.next(e)}logout(){localStorage.removeItem(this.tokenKey),this.userSubject.next(null),this.router.navigate(["/auth"])}isAuthenticated(){let e=this.getToken();return e?!C(e):!1}static \u0275fac=function(r){return new(r||t)(d(v),d(b))};static \u0275prov=g({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var q=(()=>{class t{icons={search:S,user:j};static \u0275fac=function(r){return new(r||t)};static \u0275cmp=x({type:t,selectors:[["app-header"]],standalone:!0,features:[w],decls:19,vars:2,consts:[[1,"fixed","top-0","left-64","right-0","h-20","bg-white","shadow-sm","z-10"],[1,"h-full","flex","items-center","justify-between","px-8"],[1,"text-[#5B5B5B]"],[1,"text-lg"],[1,"font-medium"],[1,"flex-1","max-w-xl","px-8"],[1,"relative"],["type","text","placeholder","Buscar...",1,"w-full","px-5","py-2","pl-10","rounded-lg","border","border-gray-200","focus:outline-none","focus:ring-2","focus:ring-[#58A082]","focus:border-transparent"],[1,"absolute","left-3","top-1/2","-translate-y-1/2","text-gray-400","w-5","h-5",3,"img"],[1,"flex","items-center","space-x-4"],[1,"w-10","h-10","rounded-full","bg-gray-200","flex","items-center","justify-center"],[1,"w-6","h-6","text-gray-600",3,"img"],[1,"text-right"],[1,"font-medium","text-[#5B5B5B]"],[1,"text-sm","text-gray-500"]],template:function(r,s){r&1&&(n(0,"header",0)(1,"div",1)(2,"div",2)(3,"p",3),c(4,"Bom dia,"),i(),n(5,"p",4),c(6,"Segunda-feira, 18 de Mar\xE7o"),i()(),n(7,"div",5)(8,"div",6),m(9,"input",7)(10,"lucide-angular",8),i()(),n(11,"div",9)(12,"div",10),m(13,"lucide-angular",11),i(),n(14,"div",12)(15,"p",13),c(16,"Gustavo"),i(),n(17,"p",14),c(18,"Administrador"),i()()()()()),r&2&&(p(10),u("img",s.icons.search),p(3),u("img",s.icons.user))},dependencies:[y,I,E],encapsulation:2})}return t})();export{z as a,q as b};
