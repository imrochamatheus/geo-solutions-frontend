import{a as pe}from"./chunk-ZB3VZQTD.js";import{a as ce}from"./chunk-HM63VKUO.js";import{a as v,b as de,c as ue,d as me,e as he}from"./chunk-VUHNQSPH.js";import{a as le}from"./chunk-PUKELLXA.js";import{D as se,E as oe,i as te,n as ie,t as ne,w as ae,x as re}from"./chunk-LWWUDTLH.js";import{b as ee}from"./chunk-MH2CX7EV.js";import"./chunk-U4MZYTGD.js";import"./chunk-AJCXHZIR.js";import"./chunk-KCOFYTGJ.js";import{l as Y,r as H,s as b,u as K}from"./chunk-JOQ4QRTS.js";import{$ as B,A as N,Bb as c,Cb as x,Da as l,Db as g,Ea as m,Kb as I,La as U,Lb as O,Mb as M,Oa as y,Pa as V,Q as k,Rb as Q,Sb as q,V as w,Z as s,_ as S,_a as u,db as D,eb as F,fb as E,gb as n,h as j,ha as L,hb as r,ib as h,pa as $,qa as o,rb as z,sb as G,tb as J,u as _,wa as R,yb as W,zb as X}from"./chunk-URY3LSMO.js";import{a as C,b as A,d as Z}from"./chunk-TMC7WMLO.js";var Ie=["chart"],ge=(()=>{class i{constructor(){this.chart=o(),this.annotations=o(),this.colors=o(),this.dataLabels=o(),this.series=o(),this.stroke=o(),this.labels=o(),this.legend=o(),this.markers=o(),this.noData=o(),this.fill=o(),this.tooltip=o(),this.plotOptions=o(),this.responsive=o(),this.xaxis=o(),this.yaxis=o(),this.forecastDataPoints=o(),this.grid=o(),this.states=o(),this.title=o(),this.subtitle=o(),this.theme=o(),this.autoUpdateSeries=o(!0),this.chartReady=$(),this.chartInstance=y(null),this.chartElement=V.required("chart"),this.ngZone=w(U),this.isBrowser=K(w(R))}ngOnChanges(e){this.isBrowser&&this.ngZone.runOutsideAngular(()=>{j.schedule(()=>this.hydrate(e))})}ngOnDestroy(){this.destroy()}hydrate(e){if(this.autoUpdateSeries()&&Object.keys(e).filter(a=>a!=="series").length===0){this.updateSeries(this.series(),!0);return}this.createElement()}createElement(){return Z(this,null,function*(){let{default:e}=yield import("./chunk-IO4HXLD5.js");window.ApexCharts||=e;let t={};["annotations","chart","colors","dataLabels","series","stroke","labels","legend","fill","tooltip","plotOptions","responsive","markers","noData","xaxis","yaxis","forecastDataPoints","grid","states","title","subtitle","theme"].forEach(p=>{let T=this[p]();T&&(t[p]=T)}),this.destroy();let f=this.ngZone.runOutsideAngular(()=>new e(this.chartElement().nativeElement,t));this.chartInstance.set(f),this.render(),this.chartReady.emit({chartObj:f})})}render(){return this.ngZone.runOutsideAngular(()=>this.chartInstance()?.render())}updateOptions(e,t,a,f){return this.ngZone.runOutsideAngular(()=>this.chartInstance()?.updateOptions(e,t,a,f))}updateSeries(e,t){return this.ngZone.runOutsideAngular(()=>this.chartInstance()?.updateSeries(e,t))}appendSeries(e,t){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.appendSeries(e,t))}appendData(e){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.appendData(e))}highlightSeries(e){return this.ngZone.runOutsideAngular(()=>this.chartInstance()?.highlightSeries(e))}toggleSeries(e){return this.ngZone.runOutsideAngular(()=>this.chartInstance()?.toggleSeries(e))}showSeries(e){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.showSeries(e))}hideSeries(e){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.hideSeries(e))}resetSeries(){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.resetSeries())}zoomX(e,t){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.zoomX(e,t))}toggleDataPointSelection(e,t){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.toggleDataPointSelection(e,t))}destroy(){this.chartInstance()?.destroy(),this.chartInstance.set(null)}setLocale(e){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.setLocale(e))}paper(){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.paper())}addXaxisAnnotation(e,t,a){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.addXaxisAnnotation(e,t,a))}addYaxisAnnotation(e,t,a){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.addYaxisAnnotation(e,t,a))}addPointAnnotation(e,t,a){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.addPointAnnotation(e,t,a))}removeAnnotation(e,t){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.removeAnnotation(e,t))}clearAnnotations(e){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.clearAnnotations(e))}dataURI(e){return this.chartInstance()?.dataURI(e)}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=S({type:i,selectors:[["apx-chart"]],viewQuery:function(t,a){t&1&&W(a.chartElement,Ie,5),t&2&&X()},inputs:{chart:[s.SignalBased,"chart"],annotations:[s.SignalBased,"annotations"],colors:[s.SignalBased,"colors"],dataLabels:[s.SignalBased,"dataLabels"],series:[s.SignalBased,"series"],stroke:[s.SignalBased,"stroke"],labels:[s.SignalBased,"labels"],legend:[s.SignalBased,"legend"],markers:[s.SignalBased,"markers"],noData:[s.SignalBased,"noData"],fill:[s.SignalBased,"fill"],tooltip:[s.SignalBased,"tooltip"],plotOptions:[s.SignalBased,"plotOptions"],responsive:[s.SignalBased,"responsive"],xaxis:[s.SignalBased,"xaxis"],yaxis:[s.SignalBased,"yaxis"],forecastDataPoints:[s.SignalBased,"forecastDataPoints"],grid:[s.SignalBased,"grid"],states:[s.SignalBased,"states"],title:[s.SignalBased,"title"],subtitle:[s.SignalBased,"subtitle"],theme:[s.SignalBased,"theme"],autoUpdateSeries:[s.SignalBased,"autoUpdateSeries"]},outputs:{chartReady:"chartReady"},standalone:!0,features:[L,I],decls:2,vars:0,consts:[["chart",""]],template:function(t,a){t&1&&h(0,"div",null,0)},encapsulation:2,changeDetection:0})}}return i})();var ve=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=B({type:i})}static{this.\u0275inj=k({})}}return i})();var fe=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=B({type:i});static \u0275inj=k({imports:[b]})}return i})();var Ae=["*"],Se=(()=>{class i{title=o("");className=o("");static \u0275fac=function(t){return new(t||i)};static \u0275cmp=S({type:i,selectors:[["app-dashboard-card"]],inputs:{title:[s.SignalBased,"title"],className:[s.SignalBased,"className"]},standalone:!0,features:[I],ngContentSelectors:Ae,decls:5,vars:2,consts:[[1,"bg-white","shadow-md","rounded-xl","p-4",3,"ngClass"],[1,"text-lg","font-semibold","text-[#1a1a1a]","mb-4"],[1,"h-[250px]","overflow-y-auto","space-y-2","pr-2"]],template:function(t,a){t&1&&(G(),n(0,"div",0)(1,"h2",1),c(2),r(),n(3,"div",2),J(4),r()()),t&2&&(u("ngClass",a.className),l(2),x(a.title()))},dependencies:[b,Y],encapsulation:2})}return i})();var De=()=>[65,45,85,55,70,90,75,80,95],Fe=i=>({name:"Valor",data:i}),Ee=i=>[i],Oe=()=>({type:"bar",height:300}),Te=()=>["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set"],ke=i=>({categories:i}),Be=()=>["#4CAF50"];function Me(i,d){if(i&1&&(n(0,"div",14)(1,"p",11),c(2),r(),n(3,"p",21),c(4),Q(5,"currency"),r()()),i&2){let e=d.$implicit;l(2),x(e.intentionService),l(2),g(" ",q(5,2,e.price,"BRL")," ")}}function _e(i,d){i&1&&(n(0,"p",15),c(1,"Nenhum or\xE7amento recente encontrado."),r())}function Ne(i,d){if(i&1&&(n(0,"div",17)(1,"span",11),c(2),r(),n(3,"span",21),c(4),r()()),i&2){let e=d.$implicit;u("title",e.description),l(2),x(e.name),l(2),x(e.description)}}function we(i,d){i&1&&(n(0,"p",15),c(1,"Nenhum servi\xE7o dispon\xEDvel."),r())}function Pe(i,d){if(i&1&&(n(0,"div",14)(1,"p",11),c(2),r(),n(3,"p",21),c(4),r()()),i&2){let e=d.$implicit;l(2),x(e.name),l(2),g(" ",e.state," ")}}function Ze(i,d){i&1&&(n(0,"p",15),c(1,"Nenhuma cidade cadastrada."),r())}function je(i,d){if(i&1&&(n(0,"div",20)(1,"span",11),c(2),r()()),i&2){let e=d.$implicit,t=z();l(2),g(" ",t.getVariableMessageByType(e),"")}}function Le(i,d){i&1&&(n(0,"p",15),c(1,"Nenhuma vari\xE1vel definida."),r())}var xt=(()=>{class i{authService;citiesService;budgetService;serviceTypeService;displacementService;accomodationService;confrontationService;startingPointService;cities=y([]);services=y([]);variables=y([]);budgets=y([]);recentBudgets=["0087 - Levantamento planialtim\xE9trico cadastral","0086 - Georreferenciamento rural","0085 - Aerolevantamento urbano"];icons={pencil:ne,sliders:re,mapPin:ie,settings:ae,fileText:te};get userName(){return this.authService.getUsername()||""}constructor(e,t,a,f,p,T,ye,xe){this.authService=e,this.citiesService=t,this.budgetService=a,this.serviceTypeService=f,this.displacementService=p,this.accomodationService=T,this.confrontationService=ye,this.startingPointService=xe}fetchAllVariableConfiguration(){_([this.displacementService.getAll(),this.accomodationService.getAll(),this.confrontationService.getAll(),this.startingPointService.getAll()]).pipe(N(1)).subscribe(([e,t,a,f])=>{this.variables.set([...e.map(p=>A(C({},p),{type:v.DISPLACEMENT})),...t.map(p=>A(C({},p),{type:v.ACCOMODATION})),...a.map(p=>A(C({},p),{type:v.CONFRONTATION})),...f.map(p=>A(C({},p),{type:v.STARTING_POINT}))])})}fetchCardsData(){_([this.citiesService.getAllCities(),this.serviceTypeService.findAll()]).pipe(N(1)).subscribe(([e,t])=>{this.cities.set(e),this.services.set(t)})}convertToCurrency(e){return e.toLocaleString("pt-br",{style:"currency",currency:"BRL"})}getVariableMessageByType(e){let t;return e.type===v.STARTING_POINT?(t=e,`In\xEDcio: ${t.street}, ${t.city}`):e.type===v.DISPLACEMENT?(t=e,`Deslocamento: ${t.areaMin} a ${t.areaMax} (x ${t.multiplier})`):e.type===v.ACCOMODATION?(t=e,`Acomoda\xE7\xE3o de ${t.distanteMin} a ${t.distanteMax}km - ${this.convertToCurrency(t.price)}`):e.type===v.CONFRONTATION?(t=e,`Confronta\xE7\xE3o com pre\xE7o: - \xC1rea:
        ${t.areaMin} a ${t.areaMax} / ${this.convertToCurrency(t.price)}`):""}ngOnInit(){this.fetchCardsData(),this.fetchAllVariableConfiguration()}static \u0275fac=function(t){return new(t||i)(m(ee),m(le),m(ce),m(pe),m(de),m(ue),m(me),m(he))};static \u0275cmp=S({type:i,selectors:[["app-dashboard"]],standalone:!0,features:[I],decls:54,vars:31,consts:[[1,"p-4","sm:p-4","lg:p-6","space-y-6"],[1,"mb-8"],[1,"text-2xl","font-semibold","text-[#1a1a1a]"],[1,"text-[#707070]"],["title","Atividade Mensal","className","h-[400px]"],[1,"h-[300px]"],[3,"series","chart","xaxis","colors"],[1,"grid","grid-cols-1","sm:grid-cols-2","2xl:grid-cols-3","gap-4"],["title","\xDAltimos Or\xE7amentos"],[1,"flex","items-center","gap-2","mb-2","text-emerald-600"],[3,"img","size"],[1,"font-medium"],[1,"ml-auto","text-sm","text-gray-500","hidden","sm:inline"],[1,"space-y-2"],[1,"p-2","rounded-lg","transition-colors","hover:bg-emerald-500","hover:text-white","cursor-pointer","gap-4"],[1,"text-gray-400","italic"],["title","Servi\xE7os"],[1,"flex","justify-between","items-center","p-2","rounded-lg","transition-colors","hover:bg-emerald-500","hover:text-white","cursor-pointer","gap-4",3,"title"],["title","Cidades e Regi\xF5es"],["title","Vari\xE1veis"],[1,"flex","justify-between","items-center","p-2","rounded-lg","transition-colors","hover:bg-emerald-500","hover:text-white","cursor-pointer"],[1,"text-xs","group-hover:text-white","hidden","sm:block","truncate"]],template:function(t,a){t&1&&(n(0,"div",0)(1,"div",1)(2,"h1",2),c(3),r(),n(4,"p",3),c(5,"Bem-vindo de volta"),r()(),n(6,"app-dashboard-card",4)(7,"div",5),h(8,"apx-chart",6),r()(),n(9,"div",7)(10,"app-dashboard-card",8)(11,"div",9),h(12,"lucide-angular",10),n(13,"span",11),c(14,"Hist\xF3rico de Propostas"),r(),n(15,"span",12),c(16),r()(),n(17,"div",13),F(18,Me,6,5,"div",14,D,!1,_e,2,0,"p",15),r()(),n(21,"app-dashboard-card",16)(22,"div",9),h(23,"lucide-angular",10),n(24,"span",11),c(25,"Tipos oferecidos"),r(),n(26,"span",12),c(27),r()(),n(28,"div",13),F(29,Ne,5,3,"div",17,D,!1,we,2,0,"p",15),r()(),n(32,"app-dashboard-card",18)(33,"div",9),h(34,"lucide-angular",10),n(35,"span",11),c(36,"Abrang\xEAncia"),r(),n(37,"span",12),c(38),r()(),n(39,"div",13),F(40,Pe,5,2,"div",14,D,!1,Ze,2,0,"p",15),r()(),n(43,"app-dashboard-card",19)(44,"div",9),h(45,"lucide-angular",10),n(46,"span",11),c(47,"Par\xE2metros ativos"),r(),n(48,"span",12),c(49),r()(),n(50,"div",13),F(51,je,3,1,"div",20,D,!1,Le,2,0,"p",15),r()()()()),t&2&&(l(3),g("Ol\xE1, ",a.userName,""),l(5),u("series",M(24,Ee,M(22,Fe,O(21,De))))("chart",O(26,Oe))("xaxis",M(28,ke,O(27,Te)))("colors",O(30,Be)),l(4),u("img",a.icons.fileText)("size",20),l(4),g("",a.recentBudgets.length," registros"),l(2),E(a.budgets()),l(5),u("img",a.icons.settings)("size",20),l(4),g("",a.services().length," tipos"),l(2),E(a.services()),l(5),u("img",a.icons.mapPin)("size",20),l(4),g("",a.cities().length," cidades"),l(2),E(a.cities()),l(5),u("img",a.icons.sliders)("size",20),l(4),g("",a.variables().length," totais"),l(2),E(a.variables()))},dependencies:[b,H,ve,ge,oe,se,fe,Se],encapsulation:2})}return i})();export{xt as DashboardComponent};
