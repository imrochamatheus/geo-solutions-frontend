import{a as Ee,b as ye,c as k,g as Se,h as _e}from"./chunk-4MPYHDEJ.js";import{d as R}from"./chunk-HJMF6YSB.js";import"./chunk-4YRY4IP2.js";import{a as p,b as ve,c as be,d as xe,e as he}from"./chunk-VUHNQSPH.js";import{C as Ce,D as B,E as T,t as ue,u as fe,z as ge}from"./chunk-LWWUDTLH.js";import{b as ie,c as ne,d as c,e as oe,f as re,j as ae,k as le,m as de,n as me,u as ce,v as pe,w as se}from"./chunk-57VEO5ZA.js";import"./chunk-AJCXHZIR.js";import"./chunk-KCOFYTGJ.js";import{l as ee,q as te,s as q}from"./chunk-JOQ4QRTS.js";import{A as V,Ab as N,Bb as r,Cb as f,Da as l,Db as _,Ea as g,Eb as M,Fb as Y,Jb as P,Kb as S,Mb as F,Nb as Z,Oa as J,Qa as v,Tb as O,Ya as x,Z as C,_ as h,_a as u,cb as E,db as X,eb as K,fb as Q,gb as n,hb as o,ia as L,ib as d,ja as G,lb as D,mb as W,qb as y,rb as b,u as $,w as A}from"./chunk-URY3LSMO.js";import{c as H}from"./chunk-TMC7WMLO.js";var Me=(i,m)=>({"bg-[#58A082] hover:bg-[#4a8870] cursor-pointer ":i,"bg-gray-300 text-gray-500 cursor-not-allowed":m});function Fe(i,m){if(i&1&&(n(0,"div",4),d(1,"input",5),n(2,"div")(3,"label",6),r(4,"Pre\xE7o"),o(),d(5,"input",7),n(6,"small",8),r(7),o()(),n(8,"div")(9,"label",6),r(10," \xC1rea M\xEDnima (m) "),o(),d(11,"input",9),n(12,"small",8),r(13),o()(),n(14,"div")(15,"label",6),r(16," \xC1rea M\xE1xima (m) "),o(),d(17,"input",10),n(18,"small",8),r(19),o()(),n(20,"div",11)(21,"div",12)(22,"label",13),d(23,"input",14),r(24," Confronta\xE7\xE3o Urbana "),o()(),n(25,"div",12)(26,"label",13),d(27,"input",15),r(28," Confronta\xE7\xE3o Rural"),o()()()()),i&2){let e=b();l(7),f(e.getFieldError("price")),l(6),f(e.getFieldError("areaMin")),l(6),f(e.getFieldError("areaMax"))}}function Oe(i,m){if(i&1&&(n(0,"div",4)(1,"div")(2,"label",6),r(3," \xC1rea M\xEDnima (m) "),o(),d(4,"input",9),n(5,"small",8),r(6),o()(),n(7,"div")(8,"label",6),r(9," \xC1rea M\xE1xima (m) "),o(),d(10,"input",10),n(11,"small",8),r(12),o()(),n(13,"div")(14,"label",6),r(15," Multiplicador "),o(),d(16,"input",16),n(17,"small",8),r(18),o()()()),i&2){let e=b();l(6),f(e.getFieldError("areaMin")),l(6),f(e.getFieldError("areaMax")),l(6),f(e.getFieldError("multiplier"))}}function we(i,m){if(i&1&&(n(0,"div",4)(1,"div")(2,"label",6),r(3,"Pre\xE7o"),o(),d(4,"input",7),n(5,"small",8),r(6),o()(),n(7,"div")(8,"label",6),r(9," Dist\xE2ncia M\xEDnima (m) "),o(),d(10,"input",17),n(11,"small",8),r(12),o()(),n(13,"div")(14,"label",6),r(15," Dist\xE2ncia M\xE1xima (m) "),o(),d(16,"input",18),n(17,"small",8),r(18),o()()()),i&2){let e=b();l(6),f(e.getFieldError("price")),l(6),f(e.getFieldError("distanteMin")),l(6),f(e.getFieldError("distanteMax"))}}function Ve(i,m){if(i&1&&(n(0,"div",4)(1,"div")(2,"label",6),r(3,"Rua"),o(),d(4,"input",19),n(5,"small",8),r(6),o()(),n(7,"div")(8,"label",6),r(9,"N\xFAmero"),o(),d(10,"input",20),n(11,"small",8),r(12),o()(),n(13,"div")(14,"label",6),r(15,"Bairro"),o(),d(16,"input",21),n(17,"small",8),r(18),o()(),n(19,"div")(20,"label",6),r(21,"Cidade"),o(),d(22,"input",22),n(23,"small",8),r(24),o()(),n(25,"div")(26,"label",6),r(27,"Estado"),o(),d(28,"input",23),n(29,"small",8),r(30),o()(),n(31,"div")(32,"label",6),r(33,"Pa\xEDs"),o(),d(34,"input",24),n(35,"small",8),r(36),o()()()),i&2){let e=b();l(6),f(e.getFieldError("street")),l(6),f(e.getFieldError("number")),l(6),f(e.getFieldError("neighborhood")),l(6),f(e.getFieldError("city")),l(6),f(e.getFieldError("state")),l(6),f(e.getFieldError("country"))}}var z=(()=>{class i{fb;ref;config;form;data;variableType=p;icons={add:Ce};constructor(e,a,t){this.fb=e,this.ref=a,this.config=t,this.data=t.data}createForm(){switch(this.data.type){case p.CONFRONTATION:this.form=this.fb.group({id:[null],price:[null,[c.required,c.min(0)]],areaMin:[null,[c.required,c.min(0)]],areaMax:[null,[c.required,c.min(0)]],urbanConfrontation:[!1],ruralConfrontation:[!1]});break;case p.DISPLACEMENT:this.form=this.fb.group({id:[null],areaMin:[null,[c.required,c.min(0)]],areaMax:[null,[c.required,c.min(0)]],multiplier:[null,[c.required,c.min(0)]]});break;case p.ACCOMODATION:this.form=this.fb.group({id:[null],price:[null,[c.required,c.min(0)]],distanteMin:[null,[c.required,c.min(0)]],distanteMax:[null,[c.required,c.min(0)]]});break;case p.STARTING_POINT:this.form=this.fb.group({id:[null],city:["",c.required],state:["",c.required],street:["",c.required],number:["",c.required],country:["",c.required],neighborhood:["",c.required]});break}}getFieldError(e){let a=this.form.get(e),t="";return!a?.touched||!a?.dirty||(a?.hasError("required")?t="Campo obrigat\xF3rio":a?.hasError("min")?t="Valor m\xEDnimo inv\xE1lido":a?.hasError("maxlength")&&(t="Valor m\xE1ximo inv\xE1lido")),t}onSubmit(){if(!this.form.valid){this.form.markAllAsTouched();return}this.data.onSave(this.data.type,this.form.value),this.ref.close()}onClose(){this.ref.close()}ngOnInit(){this.createForm(),this.data.initialData&&this.form.patchValue(this.data.initialData)}static \u0275fac=function(a){return new(a||i)(g(ce),g(ye),g(Ee))};static \u0275cmp=h({type:i,selectors:[["app-add-service-modal"]],standalone:!0,features:[S],decls:10,vars:7,consts:[[1,"mt-4",3,"ngSubmit","formGroup"],[1,"mt-6","flex","justify-end","space-x-3"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-gray-700","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-[#58A082]","rounded-md","border","border-gray-300",3,"click"],["type","submit",1,"px-4","py-2","text-sm","font-medium","focus:outline-none","focus:ring-2","focus:ring-offset-2","rounded-md","text-white",3,"disabled","ngClass"],[1,"space-y-4"],["type","hidden","formControlName","id"],[1,"block","text-sm","font-medium","text-gray-700"],["formControlName","price","placeholder","0","type","number","step","0.01",1,"w-full","px-3","py-2","border","rounded-md","focus:outline-none"],[1,"text-red-500"],["formControlName","areaMin","placeholder","0","type","number",1,"w-full","px-3","py-2","border","rounded-md","focus:outline-none"],["formControlName","areaMax","placeholder","0","type","number",1,"w-full","px-3","py-2","border","rounded-md","focus:outline-none"],[1,"space-y-2"],[1,"flex","items-center"],[1,"ml-2","text-sm","text-gray-700","flex","items-center","gap-2"],["formControlName","urbanConfrontation","type","checkbox",1,"w-5","h-5","border","rounded-md","focus:outline-none"],["formControlName","ruralConfrontation","type","checkbox",1,"w-5","h-5","border","rounded-md","focus:outline-none"],["formControlName","multiplier","placeholder","0","type","number","step","0.1",1,"w-full","px-3","py-2","border","rounded-md","focus:outline-none"],["formControlName","distanteMin","placeholder","0","type","number",1,"w-full","px-3","py-2","border","rounded-md","focus:outline-none"],["formControlName","distanteMax","placeholder","0","type","number",1,"w-full","px-3","py-2","border","rounded-md","focus:outline-none"],["formControlName","street","placeholder","Rua","type","text",1,"w-full","px-3","py-2","border","rounded-md","focus:outline-none"],["formControlName","number","placeholder","N\xFAmero","type","text",1,"w-full","px-3","py-2","border","rounded-md","focus:outline-none"],["formControlName","neighborhood","placeholder","Bairro","type","text",1,"w-full","px-3","py-2","border","rounded-md","focus:outline-none"],["formControlName","city","placeholder","Cidade","type","text",1,"w-full","px-3","py-2","border","rounded-md","focus:outline-none"],["formControlName","state","placeholder","Estado","type","text",1,"w-full","px-3","py-2","border","rounded-md","focus:outline-none"],["formControlName","country","placeholder","Pa\xEDs","type","text",1,"w-full","px-3","py-2","border","rounded-md","focus:outline-none"]],template:function(a,t){if(a&1&&(n(0,"form",0),y("ngSubmit",function(){return t.onSubmit()}),x(1,Fe,29,3)(2,Oe,19,3)(3,we,19,3)(4,Ve,37,6),n(5,"div",1)(6,"button",2),y("click",function(){return t.onClose()}),r(7," Cancelar "),o(),n(8,"button",3),r(9," Salvar "),o()()()),a&2){let s;u("formGroup",t.form),l(),E(1,(s=t.data.type)===t.variableType.CONFRONTATION?1:s===t.variableType.DISPLACEMENT?2:s===t.variableType.ACCOMODATION?3:s===t.variableType.STARTING_POINT?4:-1),l(7),u("disabled",!t.form.valid)("ngClass",Z(4,Me,t.form.valid,!t.form.valid))}},dependencies:[q,ee,pe,ae,ne,le,ie,oe,re,T,se,de,me],encapsulation:2})}return i})();var j=i=>({config:i});function qe(i,m){i&1&&D(0)}function Re(i,m){if(i&1&&x(0,qe,1,0,"ng-container",12),i&2){let e=b(),a=N(15);u("ngTemplateOutlet",a)("ngTemplateOutletContext",F(2,j,e.config()))}}function Be(i,m){i&1&&D(0)}function ke(i,m){if(i&1&&x(0,Be,1,0,"ng-container",12),i&2){let e=b(),a=N(17);u("ngTemplateOutlet",a)("ngTemplateOutletContext",F(2,j,e.config()))}}function je(i,m){i&1&&D(0)}function Le(i,m){if(i&1&&x(0,je,1,0,"ng-container",12),i&2){let e=b(),a=N(19);u("ngTemplateOutlet",a)("ngTemplateOutletContext",F(2,j,e.config()))}}function Ge(i,m){i&1&&D(0)}function Ue(i,m){if(i&1&&x(0,Ge,1,0,"ng-container",12),i&2){let e=b(),a=N(21);u("ngTemplateOutlet",a)("ngTemplateOutletContext",F(2,j,e.config()))}}function ze(i,m){i&1&&r(0," Confronta\xE7\xE3o Urbana e Rural ")}function He(i,m){i&1&&r(0," Confronta\xE7\xE3o Urbana ")}function $e(i,m){i&1&&r(0," Confronta\xE7\xE3o Rural ")}function Je(i,m){if(i&1&&(n(0,"p"),r(1),o(),n(2,"p"),r(3),o(),n(4,"p"),r(5," Tipo: "),x(6,ze,1,0)(7,He,1,0)(8,$e,1,0),o()),i&2){let e=m.config;l(),_("Pre\xE7o: R$ ",e.price,""),l(2),M("\xC1rea: ",e.areaMin,"m - ",e.areaMax,"m"),l(3),E(6,e.urbanConfrontation&&e.ruralConfrontation?6:e.urbanConfrontation?7:8)}}function Xe(i,m){if(i&1&&(n(0,"p"),r(1),o(),n(2,"p"),r(3),o()),i&2){let e=m.config;l(),M("\xC1rea: ",e.areaMin,"m - ",e.areaMax,"m"),l(2),_("Multiplicador: ",e.multiplier,"x")}}function Ke(i,m){if(i&1&&(n(0,"p"),r(1),o(),n(2,"p"),r(3),o()),i&2){let e=m.config;l(),_("Pre\xE7o: R$ ",e.price,""),l(2),M("Dist\xE2ncia: ",e.distanteMin,"m - ",e.distanteMax,"m")}}function Qe(i,m){if(i&1&&(n(0,"p"),r(1),o(),n(2,"p"),r(3),o(),n(4,"p"),r(5),o()),i&2){let e=m.config;l(),M("",e.street,", ",e.number,""),l(2),Y("",e.neighborhood," - ",e.city,"/",e.state,""),l(2),f(e.country)}}var Te=(()=>{class i{confirmationService;type=v.required();config=v.required();onEdit=v.required();onDelete=v.required();icons={pencil:ue,trash:ge};get isConfrontacao(){return this.type()===p.CONFRONTATION}get isDeslocamento(){return this.type()===p.DISPLACEMENT}get isHospedagem(){return this.type()===p.ACCOMODATION}get isPontoPartida(){return this.type()===p.STARTING_POINT}constructor(e){this.confirmationService=e}confirmDelete(e){this.confirmationService.confirm({target:e.target,message:"Tem certeza que deseja excluir esta configura\xE7\xE3o?",icon:"pi pi-exclamation-triangle",acceptButtonStyleClass:"bg-red-500 text-white px-3 py-1 rounded-md hover:bg-red-600 transition-colors focus:outline-none focus:ring-0 focus:shadow-none ",rejectButtonStyleClass:"mx-2 bg-gray-300 text-gray-700 px-3 py-1 rounded-md hover:bg-gray-400 transition-colors focus:outline-none focus:ring-0 focus:shadow-none",acceptLabel:"Sim",rejectLabel:"Cancelar",accept:()=>{this.onDelete()(this.type(),this.config().id)}})}static \u0275fac=function(a){return new(a||i)(g(R))};static \u0275cmp=h({type:i,selectors:[["app-variable-config-item"]],inputs:{type:[C.SignalBased,"type"],config:[C.SignalBased,"config"],onEdit:[C.SignalBased,"onEdit"],onDelete:[C.SignalBased,"onDelete"]},outputs:{type:"typeChange",config:"configChange",onEdit:"onEditChange",onDelete:"onDeleteChange"},standalone:!0,features:[P([R]),S],decls:22,vars:6,consts:[["confrontacaoUrbana",""],["multiplicador",""],["distancia",""],["localizacao",""],[1,"px-4","py-2"],[1,"bg-[#F2F7F4]","rounded-lg","p-4","shadow-sm"],[1,"flex","justify-between","items-start"],[1,"space-y-1","text-sm","text-[#5B5B5B]"],[1,"flex","space-x-2"],[1,"text-gray-400","hover:text-[#58A082]","transition-colors",3,"click"],[1,"w-4","h-4",3,"img"],[1,"text-gray-400","hover:text-red-500","transition-colors",3,"click"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(a,t){if(a&1){let s=W();n(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7),x(4,Re,1,4,"ng-container")(5,ke,1,4,"ng-container")(6,Le,1,4,"ng-container")(7,Ue,1,4,"ng-container"),o(),n(8,"div",8)(9,"button",9),y("click",function(){return L(s),G(t.onEdit()())}),d(10,"lucide-angular",10),o(),n(11,"button",11),y("click",function(w){return L(s),G(t.confirmDelete(w))}),d(12,"lucide-angular",10),o(),d(13,"p-confirmPopup"),o()()()(),x(14,Je,9,4,"ng-template",null,0,O)(16,Xe,4,3,"ng-template",null,1,O)(18,Ke,4,3,"ng-template",null,2,O)(20,Qe,6,6,"ng-template",null,3,O)}a&2&&(l(4),E(4,t.isConfrontacao?4:-1),l(),E(5,t.isDeslocamento?5:-1),l(),E(6,t.isHospedagem?6:-1),l(),E(7,t.isPontoPartida?7:-1),l(3),u("img",t.icons.pencil),l(2),u("img",t.icons.trash))},dependencies:[q,te,T,B,_e,Se],encapsulation:2})}return i})();function We(i,m){if(i&1&&d(0,"app-variable-config-item",6),i&2){let e=m.$implicit,a=b();u("type",a.type())("config",e)("onDelete",a.onDelete())("onEdit",a.openEditConfigModal.bind(a,e))}}function Ye(i,m){i&1&&(n(0,"div",7),r(1," Nenhuma configura\xE7\xE3o cadastrada "),o())}var Ie=(()=>{class i{dialogService;type=v.required();title=v.required();configs=v.required();onAdd=v.required();onEdit=v.required();onDelete=v.required();icons={plus:fe};constructor(e){this.dialogService=e}openAddConfigModal(){this.dialogService.open(z,{header:"Adicionar Configura\xE7\xE3o",styleClass:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white p-6 shadow-xl transition-all",data:{initialData:null,type:this.type(),onSave:this.onAdd()}})}openEditConfigModal(e){this.dialogService.open(z,{header:"Editar Configura\xE7\xE3o",styleClass:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white p-6 shadow-xl transition-all",data:{initialData:e,type:this.type(),onSave:this.onEdit()}})}static \u0275fac=function(a){return new(a||i)(g(k))};static \u0275cmp=h({type:i,selectors:[["app-variable-card"]],inputs:{type:[C.SignalBased,"type"],title:[C.SignalBased,"title"],configs:[C.SignalBased,"configs"],onAdd:[C.SignalBased,"onAdd"],onEdit:[C.SignalBased,"onEdit"],onDelete:[C.SignalBased,"onDelete"]},outputs:{type:"typeChange",title:"titleChange",configs:"configsChange",onAdd:"onAddChange",onEdit:"onEditChange",onDelete:"onDeleteChange"},standalone:!0,features:[P([k]),S],decls:10,vars:3,consts:[[1,"bg-white","rounded-xl","shadow-sm"],[1,"flex","items-center","justify-between","p-6","border-b","border-gray-100"],[1,"text-lg","font-medium","text-[#5B5B5B]"],[1,"w-8","h-8","rounded-lg","bg-[#58A082]","text-white","flex","items-center","justify-center","hover:bg-[#4a8870]","transition-colors",3,"click"],[1,"w-5","h-5",3,"img"],[1,"h-[300px]","overflow-y-auto","divide-y","divide-gray-100"],[3,"type","config","onDelete","onEdit"],[1,"p-6","text-center","text-gray-500","h-100","flex","items-center","justify-center"]],template:function(a,t){a&1&&(n(0,"div",0)(1,"div",1)(2,"h3",2),r(3),o(),n(4,"button",3),y("click",function(){return t.openAddConfigModal()}),d(5,"lucide-angular",4),o()(),n(6,"div",5),K(7,We,1,4,"app-variable-config-item",6,X,!1,Ye,2,0,"div",7),o()()),a&2&&(l(3),_(" ",t.title()," "),l(2),u("img",t.icons.plus),l(2),Q(t.configs()))},dependencies:[T,B,Te],encapsulation:2})}return i})();var Ft=(()=>{class i{accomodationService;confrontationService;displacementService;startingPointService;configs=J({[p.ACCOMODATION]:[],[p.DISPLACEMENT]:[],[p.CONFRONTATION]:[],[p.STARTING_POINT]:[]});variableType=p;constructor(e,a,t,s){this.accomodationService=e,this.confrontationService=a,this.displacementService=t,this.startingPointService=s}getService(e){return{[p.ACCOMODATION]:this.accomodationService,[p.DISPLACEMENT]:this.displacementService,[p.CONFRONTATION]:this.confrontationService,[p.STARTING_POINT]:this.startingPointService}[e]}fetchConfigs(){$([this.confrontationService.getAll(),this.displacementService.getAll(),this.accomodationService.getAll(),this.startingPointService.getAll()]).pipe(A(e=>(console.error("Error fetching configs:",e),[]))).subscribe(e=>{let[a,t,s,I]=e;this.configs.set({[p.ACCOMODATION]:s,[p.DISPLACEMENT]:t,[p.CONFRONTATION]:a,[p.STARTING_POINT]:I})})}handleDeleteConfig(e,a){let t=this.getService(e);if(!t){console.error("Servi\xE7o n\xE3o existe para este tipo:",e);return}t.delete(a).pipe(V(1),A(s=>(console.error("Erro ao excluir configura\xE7\xE3o",s),[]))).subscribe(this.fetchConfigs.bind(this))}handleAddConfig(e,a){let t=this.getService(e);if(!t){console.error("Servi\xE7o n\xE3o existe para este tipo:",e);return}let w=a,{id:s}=w,I=H(w,["id"]);t.add(I).pipe(V(1),A(Ae=>(console.error("Erro ao adicionar configura\xE7\xE3o",Ae),[]))).subscribe(this.fetchConfigs.bind(this))}handleEditConfig(e,a){let t=this.getService(e);if(!t){console.error("Servi\xE7o n\xE3o existe para este tipo:",e);return}t.edit(a).pipe(V(1),A(s=>(console.error("Erro ao editar configura\xE7\xE3o: ",s),[]))).subscribe(this.fetchConfigs.bind(this))}ngOnInit(){this.fetchConfigs()}static \u0275fac=function(a){return new(a||i)(g(be),g(xe),g(ve),g(he))};static \u0275cmp=h({type:i,selectors:[["app-variables"]],standalone:!0,features:[S],decls:8,vars:20,consts:[[1,"pt-28","px-8","pb-8"],[1,"text-2xl","font-bold","text-[#5B5B5B]","mb-8"],[1,"grid","grid-cols-2","gap-6"],["title","Confronta\xE7\xE3o",3,"type","onAdd","onEdit","onDelete","configs"],["title","Deslocamento",3,"type","onAdd","onEdit","onDelete","configs"],["title","Hospedagem",3,"type","onAdd","onEdit","onDelete","configs"],["title","Ponto de Partida",3,"type","onAdd","onEdit","onDelete","configs"]],template:function(a,t){a&1&&(n(0,"main",0)(1,"h1",1),r(2,"Vari\xE1veis"),o(),n(3,"div",2),d(4,"app-variable-card",3)(5,"app-variable-card",4)(6,"app-variable-card",5)(7,"app-variable-card",6),o()()),a&2&&(l(4),u("type",t.variableType.CONFRONTATION)("onAdd",t.handleAddConfig.bind(t))("onEdit",t.handleEditConfig.bind(t))("onDelete",t.handleDeleteConfig.bind(t))("configs",t.configs().confrontation),l(),u("type",t.variableType.DISPLACEMENT)("onAdd",t.handleAddConfig.bind(t))("onEdit",t.handleEditConfig.bind(t))("onDelete",t.handleDeleteConfig.bind(t))("configs",t.configs().displacement),l(),u("type",t.variableType.ACCOMODATION)("onAdd",t.handleAddConfig.bind(t))("onEdit",t.handleEditConfig.bind(t))("onDelete",t.handleDeleteConfig.bind(t))("configs",t.configs().accomodation),l(),u("type",t.variableType.STARTING_POINT)("onAdd",t.handleAddConfig.bind(t))("onEdit",t.handleEditConfig.bind(t))("onDelete",t.handleDeleteConfig.bind(t))("configs",t.configs().starting_point))},dependencies:[Ie],encapsulation:2})}return i})();export{Ft as VariablesComponent};
